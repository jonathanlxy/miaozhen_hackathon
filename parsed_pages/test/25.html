<!DOCTYPE html>
<html lang="zh-cn">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   铁轨出轨总数目（卡塔兰数及大数的运用） - 余生漫漫浪 - 博客园
  </title>
  <link href="/bundles/blog-common.css?v=ChDk9h03-S75WEqNhGvXkWireJ5cCWdK1xRM9NIXfnM1" rel="stylesheet" type="text/css"/>
  <link href="/skins/fighting/bundle-fighting.css?v=W69pQL4fLQhco_Pyd3CsLpVGB-Hqgijq4cg03wVt2kQ1" id="MainCss" rel="stylesheet" type="text/css"/>
  <link href="/skins/fighting/bundle-fighting-mobile.css?v=riNccSBaYfFlRjQw4oW6Q_6u5zO0NRZr85vSvhPWcl01" id="mobile-style" media="only screen and (max-width: 768px)" rel="stylesheet" type="text/css"/>
  <link href="http://www.cnblogs.com/blvt/rss" rel="alternate" title="RSS" type="application/rss+xml"/>
  <link href="http://www.cnblogs.com/blvt/rsd.xml" rel="EditURI" title="RSD" type="application/rsd+xml"/>
  <link href="http://www.cnblogs.com/blvt/wlwmanifest.xml" rel="wlwmanifest" type="application/wlwmanifest+xml"/>
  <script src="//common.cnblogs.com/script/jquery.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   var currentBlogApp = 'blvt', cb_enable_mathjax=false;var isLogined=false;
  </script>
  <script src="/bundles/blog-common.js?v=wUUQbLTt-LocHM-6RVSAUwAYdrfA1Lt3ool1ZdiICfI1" type="text/javascript">
  </script>
 </head>
 <body>
  <a name="top">
  </a>
  <!--done-->
  <center>
   <div id="home">
    <div id="header">
     <div id="blogTitle">
      <a href="http://www.cnblogs.com/blvt/" id="lnkBlogLogo">
       <img alt="" id="blogLogo" src="/Skins/fighting/images/logo.gif"/>
      </a>
      <!--done-->
      <h1>
       <a class="headermaintitle" href="http://www.cnblogs.com/blvt/" id="Header1_HeaderTitle">
        余生漫漫浪
       </a>
      </h1>
      <h2>
       花样的年华，也别错过最好的自己！
      </h2>
     </div>
     <!--end: blogTitle 博客的标题和副标题 -->
     <div id="navigator">
      <!--done-->
      <ul id="navList">
       <li>
        <a class="menu" href="http://www.cnblogs.com/" id="blog_nav_sitehome">
         博客园
        </a>
       </li>
       <li>
        <a href="http://q.cnblogs.com/" target="_blank">
         博问
        </a>
       </li>
       <li>
        <a href="http://home.cnblogs.com/ing/" target="_blank">
         闪存
        </a>
       </li>
       <li>
        <a class="menu" href="http://www.cnblogs.com/blvt/" id="blog_nav_myhome">
         首页
        </a>
       </li>
       <li>
        <a class="menu" href="https://i.cnblogs.com/EditPosts.aspx?opt=1" id="blog_nav_newpost" rel="nofollow">
         新随笔
        </a>
       </li>
       <li>
        <a accesskey="9" class="menu" href="https://msg.cnblogs.com/send/%E4%BD%99%E7%94%9F%E6%BC%AB%E6%BC%AB%E6%B5%AA" id="blog_nav_contact" rel="nofollow">
         联系
        </a>
       </li>
       <li>
        <a class="menu" href="https://i.cnblogs.com/" id="blog_nav_admin" rel="nofollow">
         管理
        </a>
       </li>
       <li>
        <a class="menu" href="http://www.cnblogs.com/blvt/rss" id="blog_nav_rss">
         订阅
        </a>
        <a class="aHeaderXML" href="http://www.cnblogs.com/blvt/rss" id="blog_nav_rss_image">
         <img alt="订阅" src="//www.cnblogs.com/images/xml.gif"/>
        </a>
       </li>
      </ul>
      <div class="blogStats">
       <div id="blog_stats">
        <!--done-->
        随笔- 74 
文章- 0 
评论- 4
       </div>
      </div>
      <!--end: blogStats -->
     </div>
     <!--end: navigator 博客导航栏 -->
    </div>
    <!--end: header 头部 -->
    <div class="clear">
    </div>
    <div id="topicList">
     <div id="post_detail">
      <!--done-->
      <div id="topics">
       <div class="post">
        <h1 class="postTitle">
         <a class="postTitle2" href="http://www.cnblogs.com/blvt/p/7261833.html" id="cb_post_title_url">
          铁轨出轨总数目（卡塔兰数及大数的运用）
         </a>
        </h1>
        <div class="clear">
        </div>
        <div class="postBody">
         <div id="cnblogs_post_body">
          <p>
          </p>
          <p>
           个人心得：对于这种数学题，思路真的要很清晰，我开始的思路是假设n=1ton=n-1,出栈找规律，然后发现后面乱来乱复杂，完全没有数学之美的地方，
          </p>
          <p>
           后面了解了卡塔兰数的思想发现数学家真是可怕的生物，n个数，必然都有可能出现在最后，假设k在最后，则有1到k-1出轨和k+1到n出轨，所以对每个数加就好了，
          </p>
          <p>
           即f（n）=f（0）*f（n-1）+f（1）*f（n-2）...
          </p>
          <p>
           所以以后还是要注意数学思维的实用性和规律性，非常规思想性
          </p>
          <p>
           最后可以得出卡特兰数的推导式：cn=c（n-1）*（4*n-2）/(n+1)
          </p>
          <p>
           这是就涉及到大数的乘除，这题中思想还是挺好的，具体看代码就知道了。
          </p>
          <p>
           Train Problem II
          </p>
          <div align="left" class="panel_title">
           Problem Description
          </div>
          <div class="panel_content">
           As we all know the Train Problem I, the boss of the Ignatius Train Station want to know if all the trains come in strict-increasing order, how many orders that all the trains can get out of the railway.
          </div>
          <div class="panel_bottom">
          </div>
          <p>
          </p>
          <div align="left" class="panel_title">
           Input
          </div>
          <div class="panel_content">
           The input contains several test cases. Each test cases consists of a number N(1&lt;=N&lt;=100). The input is terminated by the end of file.
          </div>
          <div class="panel_bottom">
          </div>
          <p>
          </p>
          <div align="left" class="panel_title">
           Output
          </div>
          <div class="panel_content">
           For each test case, you should output how many ways that all the trains can get out of the railway.
          </div>
          <div class="panel_bottom">
          </div>
          <p>
          </p>
          <div align="left" class="panel_title">
           Sample Input
          </div>
          <div class="panel_content">
           <div>
            1 2 3 10
           </div>
          </div>
          <div class="panel_bottom">
          </div>
          <p>
          </p>
          <div align="left" class="panel_title">
           Sample Output
          </div>
          <div class="panel_content">
           <div>
            1 2 5 16796
            <div>
             <div>
              <em>
               Hint
              </em>
             </div>
             The result will be very large, so you may not process it by 32-bit integers.
            </div>
            <div>
             <div class="cnblogs_code">
              <pre><span style="color: #008080"> 1</span> <span style="color: #008000">//</span><span style="color: #008000">输出卡特兰数 
</span><span style="color: #008080"> 2</span> <span style="color: #008000">//</span><span style="color: #008000">首先需要肯定，程序是正确的 
</span><span style="color: #008080"> 3</span> <span style="color: #008000">//</span><span style="color: #008000">这算是大数乘除法！记住他们是如何处理的！由于数据很大，用基本数据类型根本无法满足要求，只能用数组来表示！</span>
<span style="color: #008080"> 4</span> #include &lt;iostream&gt;
<span style="color: #008080"> 5</span> #include&lt;cstdio&gt;
<span style="color: #008080"> 6</span> #include&lt;memory.h&gt;
<span style="color: #008080"> 7</span> <span style="color: #0000ff">using</span> <span style="color: #0000ff">namespace</span><span style="color: #000000"> std;
</span><span style="color: #008080"> 8</span> <span style="color: #0000ff">#define</span> MAX 101
<span style="color: #008080"> 9</span> <span style="color: #0000ff">#define</span> BASE 10000<span style="color: #008000">//</span><span style="color: #008000">base只是一个基度，对最终取值并没有影响，相反，base取值愈大，计算量愈小</span>
<span style="color: #008080">10</span> <span style="color: #008000">//</span><span style="color: #008000">base发生改变的时候，下面的输出也要相应地做出调整，否则也会输出错误答案！除非当base取10！</span>
<span style="color: #008080">11</span> <span style="color: #0000ff">void</span> multiply(<span style="color: #0000ff">int</span> a[],<span style="color: #0000ff">int</span> len,<span style="color: #0000ff">int</span> b)<span style="color: #008000">//</span><span style="color: #008000">乘法 </span>
<span style="color: #008080">12</span> <span style="color: #000000">{
</span><span style="color: #008080">13</span>     <span style="color: #0000ff">for</span>(<span style="color: #0000ff">int</span> i=len-<span style="color: #800080">1</span>,carry=<span style="color: #800080">0</span>;i&gt;=<span style="color: #800080">0</span>;--i)<span style="color: #008000">//</span><span style="color: #008000">从最后一位开始相乘,依次向前与每一位相乘 </span>
<span style="color: #008080">14</span>     {<span style="color: #008000">//</span><span style="color: #008000">问题在于，为什么BASE=10000？ </span>
<span style="color: #008080">15</span>         carry+=b*<span style="color: #000000">a[i];
</span><span style="color: #008080">16</span>         a[i]=carry%<span style="color: #000000">BASE;
</span><span style="color: #008080">17</span>         carry/=<span style="color: #000000">BASE;
</span><span style="color: #008080">18</span>     <span style="color: #008000">//</span><span style="color: #008000">cout&lt;&lt;"carry="&lt;&lt;carry&lt;&lt;" "&lt;&lt;"a["&lt;&lt;i&lt;&lt;"]="&lt;&lt;a[i]&lt;&lt;endl;</span><span style="color: #008000">//</span><span style="color: #008000">以4个0为一组</span>
<span style="color: #008080">19</span> <span style="color: #000000">    } 
</span><span style="color: #008080">20</span> <span style="color: #000000">}
</span><span style="color: #008080">21</span> <span style="color: #0000ff">void</span> divide(<span style="color: #0000ff">int</span> a[],<span style="color: #0000ff">int</span> len,<span style="color: #0000ff">int</span> b)<span style="color: #008000">//</span><span style="color: #008000">除法，很妙的！这种除法可能想不到，仔细体会！ </span>
<span style="color: #008080">22</span> {<span style="color: #008000">//</span><span style="color: #008000">应当如何除呢？</span>
<span style="color: #008080">23</span>     <span style="color: #0000ff">for</span>(<span style="color: #0000ff">int</span> i=<span style="color: #800080">0</span>,div=<span style="color: #800080">0</span>;i&lt;len;++i)<span style="color: #008000">//</span><span style="color: #008000">从高位除起</span>
<span style="color: #008080">24</span> <span style="color: #000000">    {
</span><span style="color: #008080">25</span>         div=div*BASE+<span style="color: #000000">a[i];
</span><span style="color: #008080">26</span>         a[i]=div/b;<span style="color: #008000">//</span><span style="color: #008000">b为除数</span>
<span style="color: #008080">27</span>         div%=<span style="color: #000000">b;
</span><span style="color: #008080">28</span> <span style="color: #000000">    }
</span><span style="color: #008080">29</span> <span style="color: #000000">}
</span><span style="color: #008080">30</span> <span style="color: #0000ff">int</span><span style="color: #000000"> main()
</span><span style="color: #008080">31</span> <span style="color: #000000">{
</span><span style="color: #008080">32</span>     <span style="color: #0000ff">int</span> i,j,h[<span style="color: #800080">101</span><span style="color: #000000">][MAX];
</span><span style="color: #008080">33</span>     memset(h[<span style="color: #800080">1</span>],<span style="color: #800080">0</span>,MAX*<span style="color: #0000ff">sizeof</span>(<span style="color: #0000ff">int</span>));<span style="color: #008000">//</span><span style="color: #008000">赋值，每一个都置为0 </span>
<span style="color: #008080">34</span>     <span style="color: #0000ff">for</span>(i=<span style="color: #800080">2</span>,h[<span style="color: #800080">1</span>][MAX-<span style="color: #800080">1</span>]=<span style="color: #800080">1</span>;i&lt;=<span style="color: #800080">100</span>;++i)<span style="color: #008000">//</span><span style="color: #008000">运用递归，并且h[1]=1; </span>
<span style="color: #008080">35</span> <span style="color: #000000">    {
</span><span style="color: #008080">36</span>         memcpy(h[i],h[i-<span style="color: #800080">1</span>],MAX*<span style="color: #0000ff">sizeof</span>(<span style="color: #0000ff">int</span>));<span style="color: #008000">//</span><span style="color: #008000">h[i]=h[i-1];按字节拷贝，保证了h[i]和h[i-1]指向数组的一致性 </span>
<span style="color: #008080">37</span>         multiply(h[i],MAX,<span style="color: #800080">4</span>*i-<span style="color: #800080">2</span>);<span style="color: #008000">//</span><span style="color: #008000">h[i]*=(4*i-2);</span>
<span style="color: #008080">38</span>         divide(h[i],MAX,i+<span style="color: #800080">1</span>);<span style="color: #008000">//</span><span style="color: #008000">h[i]/=(i+1);        </span>
<span style="color: #008080">39</span>     }<span style="color: #008000">//</span><span style="color: #008000">递归得到前100项的卡特兰数！</span>
<span style="color: #008080">40</span>     <span style="color: #0000ff">while</span>(cin&gt;&gt;i &amp;&amp; i&gt;=<span style="color: #800080">1</span> &amp;&amp; i&lt;=<span style="color: #800080">100</span>)<span style="color: #008000">//</span><span style="color: #008000">输入i的值 </span>
<span style="color: #008080">41</span> <span style="color: #000000">    {
</span><span style="color: #008080">42</span>                 <span style="color: #008000">//</span><span style="color: #008000"> for(i=1;i&lt;=100;i++)
</span><span style="color: #008080">43</span>                 <span style="color: #008000">//</span><span style="color: #008000"> {</span>
<span style="color: #008080">44</span>         <span style="color: #0000ff">for</span>(j=<span style="color: #800080">0</span>;j&lt;MAX &amp;&amp; h[i][j]==<span style="color: #800080">0</span>;++j);<span style="color: #008000">//</span><span style="color: #008000">从0位开始搜索，找到不为0的第一个数 
</span><span style="color: #008080">45</span>         <span style="color: #008000">//</span><span style="color: #008000">printf("%d\n",EOF);在c语言中，EOF=-1；</span>
<span style="color: #008080">46</span>         printf(<span style="color: #800000">"</span><span style="color: #800000">%d</span><span style="color: #800000">"</span>,h[i][j++]);<span style="color: #008000">//</span><span style="color: #008000">像是这个输出，就很妙了，第一位可能不足四位，就地输出！</span>
<span style="color: #008080">47</span>               <span style="color: #0000ff">for</span>(;j&lt;MAX;++<span style="color: #000000">j)
</span><span style="color: #008080">48</span> <span style="color: #000000">        {
</span><span style="color: #008080">49</span>         <span style="color: #008000">//</span><span style="color: #008000">    if(h[i][j]==0)</span>
<span style="color: #008080">50</span>         printf(<span style="color: #800000">"</span><span style="color: #800000">%04d</span><span style="color: #800000">"</span>,h[i][j]);<span style="color: #008000">//</span><span style="color: #008000">处在中间的值也可能没有四位，这时候要注意了，往左边加0，凑足4位，不然答案会出错！
</span><span style="color: #008080">51</span>             <span style="color: #008000">//</span><span style="color: #008000">    else
</span><span style="color: #008080">52</span>          <span style="color: #008000">//</span><span style="color: #008000"> printf("%d",h[i][j]);</span><span style="color: #008000">//</span><span style="color: #008000">不断输出值 </span>
<span style="color: #008080">53</span>         
<span style="color: #008080">54</span> <span style="color: #000000">       }
</span><span style="color: #008080">55</span>     
<span style="color: #008080">56</span>         printf(<span style="color: #800000">"</span><span style="color: #800000">\n</span><span style="color: #800000">"</span><span style="color: #000000">);
</span><span style="color: #008080">57</span> <span style="color: #000000">    }
</span><span style="color: #008080">58</span>     system(<span style="color: #800000">"</span><span style="color: #800000">pause</span><span style="color: #800000">"</span><span style="color: #000000">);
</span><span style="color: #008080">59</span>     
<span style="color: #008080">60</span>     <span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
</span><span style="color: #008080">61</span> }</pre>
             </div>
             <p>
             </p>
            </div>
           </div>
          </div>
         </div>
         <div id="MySignature">
         </div>
         <div class="clear">
         </div>
         <div id="blog_post_info_block">
          <div id="BlogPostCategory">
          </div>
          <div id="EntryTag">
          </div>
          <div id="blog_post_info">
          </div>
          <div class="clear">
          </div>
          <div id="post_next_prev">
          </div>
         </div>
        </div>
        <div class="postDesc">
         posted @
         <span id="post-date">
          2017-07-31 10:32
         </span>
         <a href="http://www.cnblogs.com/blvt/">
          余生漫漫浪
         </a>
         阅读(
         <span id="post_view_count">
          ...
         </span>
         ) 评论(
         <span id="post_comment_count">
          ...
         </span>
         )
         <a href="https://i.cnblogs.com/EditPosts.aspx?postid=7261833" rel="nofollow">
          编辑
         </a>
         <a href="#" onclick="AddToWz(7261833);return false;">
          收藏
         </a>
        </div>
       </div>
       <script type="text/javascript">
        var allowComments=true,cb_blogId=367664,cb_entryId=7261833,cb_blogApp=currentBlogApp,cb_blogUserGuid='0830f2d6-8121-e711-9fc1-ac853d9f53cc',cb_entryCreatedDate='2017/7/31 10:32:00';loadViewCount(cb_entryId);
       </script>
      </div>
      <!--end: topics 文章、评论容器-->
     </div>
     <a name="!comments">
     </a>
     <div id="blog-comments-placeholder">
     </div>
     <script type="text/javascript">
      var commentManager = new blogCommentManager();commentManager.renderComments(0);
     </script>
     <div class="commentform" id="comment_form">
      <a name="commentform">
      </a>
      <div id="divCommentShow">
      </div>
      <div id="comment_nav">
       <span id="span_refresh_tips">
       </span>
       <a clientidmode="Static" href="javascript:void(0);" id="lnk_RefreshComments" onclick="return RefreshCommentList();" runat="server">
        刷新评论
       </a>
       <a href="#" onclick="return RefreshPage();">
        刷新页面
       </a>
       <a href="#top">
        返回顶部
       </a>
      </div>
      <div id="comment_form_container">
      </div>
      <div class="ad_text_commentbox" id="ad_text_under_commentbox">
      </div>
      <div id="ad_t2">
      </div>
      <div id="opt_under_post">
      </div>
      <div class="c_ad_block" id="cnblogs_c1">
      </div>
      <div id="under_post_news">
      </div>
      <div class="c_ad_block" id="cnblogs_c2">
      </div>
      <div id="under_post_kb">
      </div>
      <div class="c_ad_block" id="HistoryToday">
      </div>
      <script type="text/javascript">
       fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
      </script>
     </div>
    </div>
    <!--end: topicList 文章列表容器-->
    <div id="sideBar">
     <div id="sideBarMain">
      <!--done-->
      <div class="newsItem">
       <h3 class="catListTitle">
        公告
       </h3>
       <div id="blog-news">
       </div>
       <script type="text/javascript">
        loadBlogNews();
       </script>
      </div>
      <div id="calendar">
       <div id="blog-calendar" style="display:none">
       </div>
       <script type="text/javascript">
        loadBlogDefaultCalendar();
       </script>
      </div>
      <div id="leftcontentcontainer">
       <div id="blog-sidecolumn">
       </div>
       <script type="text/javascript">
        loadBlogSideColumn();
       </script>
      </div>
     </div>
     <!--end: sideBarMain -->
     <div class="clear">
     </div>
    </div>
    <!--end: sideBar 侧边栏容器 -->
   </div>
   <!--end: home 自定义的最大容器 -->
   <div class="clear">
   </div>
   <div id="footer">
    <!--done-->
    Copyright ©2017 余生漫漫浪
   </div>
   <!--end: footer -->
  </center>
 </body>
</html>
